<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Katie Schuler">
<meta name="dcterms.date" content="2024-10-17">

<title>Lab 7: Applied model specification – DataSci for Lang &amp; Mind</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../include/webex.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      DataSci for Lang &amp; Mind
      </li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">DataSci for Lang &amp; Mind</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#resources" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../index.html#materials" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Materials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#study-guides" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Study guides</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#problem-sets" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Problem sets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#exams" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exams</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#lab-exercises" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab exercises</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#schedule" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#primate-brains" id="toc-primate-brains" class="nav-link active" data-scroll-target="#primate-brains"><span class="header-section-number">1</span> Primate brains</a>
  <ul class="collapse">
  <li><a href="#type-of-model" id="toc-type-of-model" class="nav-link" data-scroll-target="#type-of-model"><span class="header-section-number">1.1</span> Type of model</a></li>
  <li><a href="#model-specification" id="toc-model-specification" class="nav-link" data-scroll-target="#model-specification"><span class="header-section-number">1.2</span> Model specification</a></li>
  <li><a href="#fitted-model" id="toc-fitted-model" class="nav-link" data-scroll-target="#fitted-model"><span class="header-section-number">1.3</span> Fitted model</a></li>
  </ul></li>
  <li><a href="#social-brain-hypothesis" id="toc-social-brain-hypothesis" class="nav-link" data-scroll-target="#social-brain-hypothesis"><span class="header-section-number">2</span> Social brain hypothesis</a></li>
  <li><a href="#fruit-v-leaf-eaters" id="toc-fruit-v-leaf-eaters" class="nav-link" data-scroll-target="#fruit-v-leaf-eaters"><span class="header-section-number">3</span> Fruit v Leaf eaters</a></li>
  <li><a href="#matching-plots-to-equations" id="toc-matching-plots-to-equations" class="nav-link" data-scroll-target="#matching-plots-to-equations"><span class="header-section-number">4</span> Matching plots to equations</a></li>
  <li><a href="#polynomials" id="toc-polynomials" class="nav-link" data-scroll-target="#polynomials"><span class="header-section-number">5</span> Polynomials</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="lab-07.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 7: Applied model specification</h1>
<p class="subtitle lead">Not graded, just practice</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Katie Schuler </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 17, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Practice your new <em>modeling</em> skills with these practice exam questions! Best to open a fresh Google Colab notebook and test things out! Refer to the study guide to find answers as well.</p>
<section id="primate-brains" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="primate-brains"><span class="header-section-number">1</span> Primate brains</h2>
<p>Primates have brains of varying sizes, and one possible explanation for this variation is differences in body size. Larger-bodied primates may tend to have heavier brains, but this relationship is not always straightforward. To investigate whether body size can reliably explain differences in brain weight across primate species, let’s fit a model that predicts brain weight based on body size.</p>
<p>The data, in case you want to work with it yourself: <a href="../assests/csv/primate_brains.csv">primate brains</a></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://kathrynschuler.com/datasci/assests/csv/primate_brains.csv"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 144
Columns: 5
$ taxon          &lt;chr&gt; "Alouatta_caraya", "Alouatta_palliata", "Alouatta_pigra…
$ body_weight_g  &lt;dbl&gt; 5597, 6359, 8940, 6247, 1073, 870, 871, 239, 6409, 8034…
$ brain_weight_g &lt;dbl&gt; 52.72, 50.91, 52.97, 56.57, 21.41, 16.78, 17.21, 7.17, …
$ diet_category  &lt;chr&gt; "Fol", "Fol", "Fol", "Fol", "Frug/Fol", "Frug", "Frug",…
$ group_size     &lt;dbl&gt; 6.68, 15.55, 5.93, 6.97, 3.00, 3.50, 3.51, 1.25, 16.40,…</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>( <span class="at">x =</span> body_weight_g, <span class="at">y =</span> brain_weight_g)) <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-07_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="type-of-model" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="type-of-model"><span class="header-section-number">1.1</span> Type of model</h3>
<ol type="a">
<li><p>Is this a supervised or unsupervised learning problem?</p>
<div id="radio_YNTFWNGDHM" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_YNTFWNGDHM" value="answer"> <span>Supervised</span></label><label><input type="radio" autocomplete="off" name="radio_YNTFWNGDHM" value=""> <span>Unsupervised</span></label>
</div></li>
<li><p>Is this regression or classification?</p>
<div id="radio_BVTOUPARJQ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BVTOUPARJQ" value="answer"> <span>Regression</span></label><label><input type="radio" autocomplete="off" name="radio_BVTOUPARJQ" value=""> <span>Classification</span></label>
</div></li>
<li><p>Is the relationship between <code>brain_weight_g</code> and <code>body_weight_g</code> linear or nonlinear?</p>
<div id="radio_KVNXFDEZRR" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_KVNXFDEZRR" value=""> <span>Linear</span></label><label><input type="radio" autocomplete="off" name="radio_KVNXFDEZRR" value="answer"> <span>Nonlinear</span></label>
</div></li>
<li><p>Is the nonlinear relationship linearizable or non-linearizable?</p>
<div id="radio_YVZPXOOBGB" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_YVZPXOOBGB" value="answer"> <span>Linearizable nonlinear</span></label><label><input type="radio" autocomplete="off" name="radio_YVZPXOOBGB" value=""> <span>Non-linearizable nonlinear</span></label><label><input type="radio" autocomplete="off" name="radio_YVZPXOOBGB" value=""> <span>Neither, the relationship is linear</span></label>
</div></li>
<li><p>What function could we choose to linearize this relationships?</p>
<div id="radio_SMZWYGOLXO" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SMZWYGOLXO" value=""> <span>Quadratic polynomial</span></label><label><input type="radio" autocomplete="off" name="radio_SMZWYGOLXO" value=""> <span>Cubic polynomial</span></label><label><input type="radio" autocomplete="off" name="radio_SMZWYGOLXO" value="answer"> <span>Log transformation</span></label><label><input type="radio" autocomplete="off" name="radio_SMZWYGOLXO" value=""> <span>None, the relationship is already linear</span></label><label><input type="radio" autocomplete="off" name="radio_SMZWYGOLXO" value=""> <span>None, the relationship is non-linearizable</span></label>
</div></li>
</ol>
</section>
<section id="model-specification" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="model-specification"><span class="header-section-number">1.2</span> Model specification</h3>
<p>Suppose we specify the following model for the primate brains data: <span class="math inline">\(\log(brain\_weight\_g) = w_1  1 + w_2  \log(body\_weight\_g)\)</span></p>
<ol type="a">
<li><p>What is the response variable?</p>
<div id="radio_VTCIUIJSJI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_VTCIUIJSJI" value=""> <span>brain_weight_g</span></label><label><input type="radio" autocomplete="off" name="radio_VTCIUIJSJI" value=""> <span>body_weight_g</span></label><label><input type="radio" autocomplete="off" name="radio_VTCIUIJSJI" value="answer"> <span>log(brain_weight_g)</span></label><label><input type="radio" autocomplete="off" name="radio_VTCIUIJSJI" value=""> <span>log(body_weight_g)</span></label>
</div></li>
<li><p>What is the explanatory variable?</p>
<div id="radio_IKKBONVSVY" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IKKBONVSVY" value=""> <span>brain_weight_g</span></label><label><input type="radio" autocomplete="off" name="radio_IKKBONVSVY" value=""> <span>body_weight_g</span></label><label><input type="radio" autocomplete="off" name="radio_IKKBONVSVY" value=""> <span>log(brain_weight_g)</span></label><label><input type="radio" autocomplete="off" name="radio_IKKBONVSVY" value="answer"> <span>log(body_weight_g)</span></label>
</div></li>
<li><p>True or false, the functional form of this model can be expressed as a weighted sum of inputs? <span class="math inline">\(y=\sum_{i=1}^{n}w_ix_i\)</span></p>
<div id="radio_BCSBHRXYOX" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_BCSBHRXYOX" value="answer"> <span>True</span></label><label><input type="radio" autocomplete="off" name="radio_BCSBHRXYOX" value=""> <span>False</span></label>
</div></li>
<li><p>Which of the following model terms are included in the model specification above? Choose all that apply.</p>
<div id="radio_XIEVZFQXLJ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_XIEVZFQXLJ" value="answer"> <span>Intercept</span></label><label><input type="radio" autocomplete="off" name="radio_XIEVZFQXLJ" value="answer"> <span>Main</span></label><label><input type="radio" autocomplete="off" name="radio_XIEVZFQXLJ" value=""> <span>Interaction</span></label><label><input type="radio" autocomplete="off" name="radio_XIEVZFQXLJ" value="answer"> <span>Transformation</span></label>
</div></li>
<li><p>Specify the model equation in R notation.</p></li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>Answer</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># like this (explicit intercept)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(brain_weight_g) <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">log_</span>(body_weight_g)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># or like this (implicit intercept)</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(brain_weight_g) <span class="sc">~</span> <span class="fu">log</span>(body_weight_g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="fitted-model" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="fitted-model"><span class="header-section-number">1.3</span> Fitted model</h3>
<p>Suppose you fit the model with <code>lm()</code> and return the following:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = log(brain_weight_g) ~ 1 + log(body_weight_g), data = data)

Coefficients:
       (Intercept)  log(body_weight_g)  
           -2.4649              0.7752  </code></pre>
</div>
</div>
<ol type="a">
<li><p>Which of the following is <span class="math inline">\(w_1\)</span> in the model specification <span class="math inline">\(\log(brain\_weight\_g) = w_1 1 + w_2 \log(body\_weight\_g)\)</span></p>
<div id="radio_SJLIRJJXFE" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SJLIRJJXFE" value=""> <span>1</span></label><label><input type="radio" autocomplete="off" name="radio_SJLIRJJXFE" value="answer"> <span>-2.4649</span></label><label><input type="radio" autocomplete="off" name="radio_SJLIRJJXFE" value=""> <span>0.7752</span></label><label><input type="radio" autocomplete="off" name="radio_SJLIRJJXFE" value=""> <span>Not enough information to determine this</span></label>
</div></li>
<li><p>Which of the following is <span class="math inline">\(w_2\)</span> in the model specification <span class="math inline">\(\log(brain\_weight\_g) = w_1 1 + w_2 \log(body\_weight\_g)\)</span></p>
<div id="radio_JIIVPJUOHU" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_JIIVPJUOHU" value=""> <span>1</span></label><label><input type="radio" autocomplete="off" name="radio_JIIVPJUOHU" value=""> <span>-2.4649</span></label><label><input type="radio" autocomplete="off" name="radio_JIIVPJUOHU" value="answer"> <span>0.7752</span></label><label><input type="radio" autocomplete="off" name="radio_JIIVPJUOHU" value=""> <span>Not enough information to determine this</span></label>
</div></li>
<li><p>Suppose a primate has a <span class="math inline">\(\log(body\_weight\_g)\)</span> equal to 10. Which of the following would the model predict to be the primate’s <span class="math inline">\(\log(brain\_weight\_g)\)</span>?</p>
<div id="radio_MMZTGGCVGE" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_MMZTGGCVGE" value=""> <span>25.21</span></label><label><input type="radio" autocomplete="off" name="radio_MMZTGGCVGE" value="answer"> <span>5.29</span></label><label><input type="radio" autocomplete="off" name="radio_MMZTGGCVGE" value=""> <span>-10.7752</span></label><label><input type="radio" autocomplete="off" name="radio_MMZTGGCVGE" value=""> <span>Not enough information to determine this</span></label>
</div></li>
<li><p>Which of the following figures could show the fitted model?</p></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-07_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div id="radio_AJLSGMGCAH" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_AJLSGMGCAH" value=""> <span>the blue line</span></label><label><input type="radio" autocomplete="off" name="radio_AJLSGMGCAH" value=""> <span>the red line</span></label><label><input type="radio" autocomplete="off" name="radio_AJLSGMGCAH" value="answer"> <span>the black line</span></label><label><input type="radio" autocomplete="off" name="radio_AJLSGMGCAH" value=""> <span>Not enough information to determine this</span></label>
</div>
</section>
</section>
<section id="social-brain-hypothesis" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="social-brain-hypothesis"><span class="header-section-number">2</span> Social brain hypothesis</h2>
<p>The <strong>Social Brain Hypothesis</strong> argues that the pressures of navigating increasingly complex social environments were a significant driver in the evolution of brain size and intelligence in humans and other primates.</p>
<p>Let’s specify and fit this model in R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">log</span>(brain_weight_g) <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">log</span>(group_size), </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> primate_brains)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>primate_brains <span class="ot">&lt;-</span> primate_brains <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">y_body_group =</span> <span class="fu">predict</span>(model, primate_brains))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(primate_brains, <span class="fu">aes</span>(, </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">log</span>(brain_weight_g),</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">log</span>(group_size))</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="fu">aes</span>(<span class="at">y =</span> y_body_group)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-07_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol type="a">
<li>Fill in the blank: how many inputs does this model have? <input class="webex-solveme nospaces" size="1" data-answer="[&quot;2&quot;]"></li>
</ol>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">b. Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Specify the model as an equation</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p><span class="math inline">\(\log(brain\_weight\_g) = w_1  1 + w_2  \log(group\_size)\)</span></p>
<p>or, if you created new columns in your data with the the log transformed data, for example:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">log_brain_weight =</span> <span class="fu">log</span>(brain_weight_g)) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">log_group_size =</span> <span class="fu">log</span>(group_size))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>then you could have written:</p>
<p><span class="math inline">\(\log(brain\_weight\_g) = w_1  1 + w_2  \log(group\_size)\)</span></p>
</div>
</div>
</div>
<ol start="3" type="a">
<li><p>Given the figure above, which of the following could be the free paramter estimate for <span class="math inline">\(w_1\)</span>?</p>
<div id="radio_GRPDKSVIQR" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_GRPDKSVIQR" value=""> <span>1</span></label><label><input type="radio" autocomplete="off" name="radio_GRPDKSVIQR" value=""> <span>0.66</span></label><label><input type="radio" autocomplete="off" name="radio_GRPDKSVIQR" value="answer"> <span>2.25</span></label><label><input type="radio" autocomplete="off" name="radio_GRPDKSVIQR" value=""> <span>5</span></label><label><input type="radio" autocomplete="off" name="radio_GRPDKSVIQR" value=""> <span>Not enough information to determine this</span></label>
</div></li>
<li><p>Given the figure above, which of the following could be the free paramter estimate for <span class="math inline">\(w_2\)</span>?</p>
<div id="radio_SRDAVPLMBB" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SRDAVPLMBB" value=""> <span>1</span></label><label><input type="radio" autocomplete="off" name="radio_SRDAVPLMBB" value="answer"> <span>0.66</span></label><label><input type="radio" autocomplete="off" name="radio_SRDAVPLMBB" value=""> <span>2.25</span></label><label><input type="radio" autocomplete="off" name="radio_SRDAVPLMBB" value=""> <span>5</span></label><label><input type="radio" autocomplete="off" name="radio_SRDAVPLMBB" value=""> <span>Not enough information to determine this</span></label>
</div></li>
<li><p>Suppose we encounter a primate in a (log) group size of 4. What could be the model prediction for their (log) brain weight?</p>
<div id="radio_RZVNALBRMH" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_RZVNALBRMH" value=""> <span>3.5</span></label><label><input type="radio" autocomplete="off" name="radio_RZVNALBRMH" value=""> <span>4.1</span></label><label><input type="radio" autocomplete="off" name="radio_RZVNALBRMH" value="answer"> <span>4.9</span></label><label><input type="radio" autocomplete="off" name="radio_RZVNALBRMH" value=""> <span>6.2</span></label><label><input type="radio" autocomplete="off" name="radio_RZVNALBRMH" value=""> <span>Not enough information to determine this</span></label>
</div></li>
</ol>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">f.&nbsp;Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Suppose we wanted to include <span class="math inline">\(\log(body\_size\_g)\)</span> back into the model as an additional predictor of <span class="math inline">\(\log(brain\_size\_g)\)</span>. Specify the model in R.</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(brain_size_g) <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">log</span>(group_size) <span class="sc">+</span> <span class="fu">log</span>(body_size_g)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="fruit-v-leaf-eaters" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="fruit-v-leaf-eaters"><span class="header-section-number">3</span> Fruit v Leaf eaters</h2>
<p>Diet may influence the relationship between brain and body size in primates because the type of food a species consumes can impact its ability to meet the energy demands of a larger brain. Fruit-eating primates have access to energy-rich, easily digestible food, which could support the metabolic costs of both a large body and a larger, more complex brain.</p>
<p>Let’s begin by adding <code>diet_category</code> to our plot mapped to the color aesthetic.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>primate_brains <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="fu">log</span>(brain_weight_g), </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="fu">log</span>(body_weight_g),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> diet_category</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-07_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Frugivorous (“Frug”) primates primarily eat fruit, while folivorous (“Fol”) primates primarily consume leaves. The “Frug/Fol” category refers to primates that combine both fruit and leaf consumption in their diet. “Om” stands for omnivores, which we might suspect is similar to “Frug/Fol” with more variation in diet. To simplify things, let’s focus our analysis on just the Fol and Frug categories.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>fruit_v_leaves <span class="ot">&lt;-</span> primate_brains <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(diet_category <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Fol"</span>, <span class="st">"Frug"</span>)) </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>fruit_v_leaves <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="fu">log</span>(body_weight_g), </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="fu">log</span>(brain_weight_g), </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> diet_category</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-07_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Suppose we specify a model that predicts brain weight by body size and diet category.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">log</span>(brain_weight_g) <span class="sc">~</span> <span class="fu">log</span>(body_weight_g) <span class="sc">+</span> diet_category, <span class="at">data =</span> fruit_v_leaves) </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = log(brain_weight_g) ~ log(body_weight_g) + diet_category, 
    data = fruit_v_leaves)

Coefficients:
       (Intercept)  log(body_weight_g)   diet_categoryFrug  
           -2.8047              0.7778              0.4576  </code></pre>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">a. Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>Specify the model with a mathematical expression.</p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p><span class="math inline">\(\log(brain\_size\_g) = w_11 + w_2\log(body\_size\_g) + w_3diet\_category\)</span></p>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">b. Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>Notice we did not include an interaction term between body weight and diet category. Why might a modeler make this decision?</p>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p>A modeler might choose not to include an interaction term based on exploratory visualization. The scatter plot shows roughly parallel lines for frugivorous and folivorous primates, which could indicate that body size influences brain weight similarly, regardless of diet.</p>
<p>You could have also said something relevant to model complexity: the modeler may have noticed in exploratory data analysis that body size seems to influence brain weight similarly, and decided to keep the model simpler and easier to interpret by leaving out the interaction.</p>
</div>
</div>
</div>
<ol start="3" type="a">
<li><p>True or false: the <code>diet_category</code> variable is categorical, so this is a classification problem.</p>
<div id="radio_HHRBRBHMTI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_HHRBRBHMTI" value=""> <span>True</span></label><label><input type="radio" autocomplete="off" name="radio_HHRBRBHMTI" value="answer"> <span>False</span></label>
</div></li>
</ol>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">c.&nbsp;Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<p>Write the <em>fitted model</em> as a mathematical expression.</p>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<p><span class="math inline">\(\log(brain\_size\_g) = -2.8047\times{1} + 0.7778\times{\log(body\_size\_g)} + 0.4576\times{diet\_category}\)</span></p>
</div>
</div>
</div>
<ol start="4" type="a">
<li><p>Based on the fitted model returned by <code>lm()</code> above, which level of <code>diet_category</code> is the reference level?</p>
<div id="radio_YJQQZAULQG" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_YJQQZAULQG" value="answer"> <span>Fol</span></label><label><input type="radio" autocomplete="off" name="radio_YJQQZAULQG" value=""> <span>Frug</span></label><label><input type="radio" autocomplete="off" name="radio_YJQQZAULQG" value=""> <span>Not enough information to determine this</span></label>
</div></li>
</ol>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">e. Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<p>What is the model’s prediction for a primate with a (log) body weight of 7 who eats leaves? Write your answer as a mathematical expression without simplifying it.</p>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<p><span class="math inline">\(\log(brain\_size\_g) = -2.8047\times{1} + 0.7778\times{\mathbf{7}} + 0.4576\times{\mathbf{0}}\)</span></p>
</div>
</div>
</div>
<ol start="6" type="a">
<li>Fill in the blank. Of the figures below, figure <input class="webex-solveme nospaces" size="4" data-answer="[&quot;D&quot;]"> could be the plot of the model we specified.</li>
</ol>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-ncol="2" data-layout-nrow="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="lab-07_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="lab-07_files/figure-html/unnamed-chunk-29-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="lab-07_files/figure-html/unnamed-chunk-29-3.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="lab-07_files/figure-html/unnamed-chunk-29-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</section>
<section id="matching-plots-to-equations" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="matching-plots-to-equations"><span class="header-section-number">4</span> Matching plots to equations</h2>
<p>Match the following plots to the equations below. Each plot can be mapped to a unique expression of the linear model equation.</p>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-ncol="2" data-layout-nrow="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="lab-07_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="lab-07_files/figure-html/unnamed-chunk-30-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="lab-07_files/figure-html/unnamed-chunk-30-3.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="lab-07_files/figure-html/unnamed-chunk-30-4.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="lab-07_files/figure-html/unnamed-chunk-30-5.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="lab-07_files/figure-html/unnamed-chunk-30-6.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<ol type="a">
<li><p><span class="math inline">\(y = w_11\)</span> <input class="webex-solveme nospaces" size="4" data-answer="[&quot;B&quot;]"></p></li>
<li><p><span class="math inline">\(y = w_11 + w_2x\)</span> <input class="webex-solveme nospaces" size="4" data-answer="[&quot;C&quot;]"></p></li>
<li><p><span class="math inline">\(y = w_11 + w_2z\)</span> <input class="webex-solveme nospaces" size="4" data-answer="[&quot;D&quot;]"></p></li>
<li><p><span class="math inline">\(y = w_11 + w_2x + w_3z\)</span> <input class="webex-solveme nospaces" size="4" data-answer="[&quot;F&quot;]"></p></li>
<li><p><span class="math inline">\(y = w_11 + w_2x + w_3z + w_4x\times{z} + w_5x^2\)</span> <input class="webex-solveme nospaces" size="4" data-answer="[&quot;E&quot;]"></p></li>
<li><p><span class="math inline">\(y = w_11 + w_2x + w_3x^2\)</span> <input class="webex-solveme nospaces" size="4" data-answer="[&quot;A&quot;]"></p></li>
<li><p>Which of the equations above has the most inputs (enter a lowercase letter a-f)?</p>
<p><input class="webex-solveme nospaces" size="4" data-answer="[&quot;e&quot;]"></p></li>
<li><p>Which of the equations above is the most complex model? (enter a lowercase letter a-f)?</p>
<p><input class="webex-solveme nospaces" size="4" data-answer="[&quot;e&quot;]"></p></li>
</ol>
</section>
<section id="polynomials" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="polynomials"><span class="header-section-number">5</span> Polynomials</h2>
<ol type="1">
<li><p>What is the purpose of including polynomial terms in a linear model?</p>
<div id="radio_SYDYFTIYJA" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SYDYFTIYJA" value=""> <span>To improve model interpretability</span></label><label><input type="radio" autocomplete="off" name="radio_SYDYFTIYJA" value="answer"> <span>To model nonlinear relationships</span></label><label><input type="radio" autocomplete="off" name="radio_SYDYFTIYJA" value=""> <span>To reduce overfitting in the model</span></label><label><input type="radio" autocomplete="off" name="radio_SYDYFTIYJA" value=""> <span>To ensure that residuals are normally distributed</span></label>
</div></li>
<li><p>Which of the following is an example of a quadratic polynomial term in a linear model?</p>
<ol type="a">
<li><span class="math inline">\(x\)</span></li>
<li><span class="math inline">\(x^2\)</span></li>
<li><span class="math inline">\(\sqrt{x}\)</span></li>
<li><span class="math inline">\(\log{x}\)</span></li>
</ol>
<p><input class="webex-solveme nospaces" size="4" data-answer="[&quot;b&quot;]"></p></li>
<li><p>Why might higher-degree polynomial terms lead to overfitting in a linear model?</p>
<div id="radio_WYUQXYXNIA" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_WYUQXYXNIA" value=""> <span>Higher-degree terms make the model too simple</span></label><label><input type="radio" autocomplete="off" name="radio_WYUQXYXNIA" value="answer"> <span>Higher-degree terms force the model to fit the noise in the data</span></label><label><input type="radio" autocomplete="off" name="radio_WYUQXYXNIA" value=""> <span>Polynomial terms always reduce the model's flexibility</span></label><label><input type="radio" autocomplete="off" name="radio_WYUQXYXNIA" value=""> <span>Polynomial terms make the model biased</span></label>
</div></li>
<li><p>Which of the following models includes both linear and quadratic terms</p>
<ol type="a">
<li><span class="math inline">\(y = \beta_0 + \beta_1x\)</span></li>
<li><span class="math inline">\(y = \beta_0 + \beta_1x^2\)</span></li>
<li><span class="math inline">\(y = \beta_0 + \beta_1x + \beta_2x^2\)</span></li>
<li><span class="math inline">\(y = \beta_0 + \beta_1x + \beta_2x^3\)</span></li>
</ol>
<p><input class="webex-solveme nospaces" size="4" data-answer="[&quot;c&quot;]"></p></li>
</ol>
<!-- 
### Applied questions 

The following plot shows cooling water. The temperature of water at time after starting to cool from boiling. 





::: {.cell}

```{.r .cell-code}
CoolingWater %>%
    ggplot(aes(
        x = time, 
        y = temp
    )) + 
    geom_point()
```

::: {.cell-output-display}
![](lab-07_files/figure-html/unnamed-chunk-33-1.png){width=672}
:::
:::




a. True or false, these data can be model with linear regression. 





    <div class='webex-radiogroup' id='radio_ZZEVGVLUOO'><label><input type="radio" autocomplete="off" name="radio_ZZEVGVLUOO" value="answer"></input> <span>True</span></label><label><input type="radio" autocomplete="off" name="radio_ZZEVGVLUOO" value=""></input> <span>false</span></label></div>





::: {.panel-tabset}
## b. Question

Specify the model that predicts temp as a weighted sum of time. 

## Answer


$temp= w_11 + w_2time + w_3time^2$

:::

c. If we want to perform linear regression, how should we handle the nonlinearity in the data? 





    <div class='webex-radiogroup' id='radio_VCNBOVMJKL'><label><input type="radio" autocomplete="off" name="radio_VCNBOVMJKL" value=""></input> <span>Transform the time variable</span></label><label><input type="radio" autocomplete="off" name="radio_VCNBOVMJKL" value="answer"></input> <span>Expand the input space with a polynomial</span></label><label><input type="radio" autocomplete="off" name="radio_VCNBOVMJKL" value=""></input> <span>We need to fit a model other than linear regression here</span></label></div>









 -->


</section>

</main> <!-- /main -->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>